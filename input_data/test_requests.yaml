defaults:
  oauth2:
    my_provider:
      client_id: ${my_provider_client_id}
      client_secret: ${my_provider_client_secret}
      token_url: "https://fake-idp.wiremockapi.cloud/token"
      grant_type: "client_credentials"
      scope: ${my_provider_scope}
  request:
    truststore: false
    keystore: []
    proxy: null
    url_template: "https://{locale}-{project}{env}.wiremockapi.cloud{path}"
    method: "GET"
    headers:
      Accept: "application/json"
  expect:
    status_code: 200
    headers:
      Content-Type: "application/json"
    error: false

requests:
#  - name: "Get User Data"
#    summary: "Get user data from the API"
#    tags: "user"
#    invoke:
#      url: "https://dymkj.wiremockapi.cloud/json/1"
#      method: "GET"
#      headers:
#        Authorization: "Bearer $token"
#    expected:
#      status_code:
#        - equals: 200
#        - in_range: 200:299
#      headers:
#        - includes:
#            Content-Type: "application/json"
#      body:
#        - equals:
#            id: 1
#            value: "things"
##        - contains:
##          - "id"
##          - "value"
##        error: false

  - name: "Create New Post"
    summary: ""
    tags: ""
    invoke:
      url_values:
        locale:
          - "us"
          - "eu"
        project:
          - "coffeeshop"
        env:
          - "-test"
          - ""
        path: "/grind?qty=2&size=1"
      method: "GET"
      payload: None
      headers:
        Authorization: "$bearer"
    expect:
      status_code:
        - equals: 200
      body:
        - exists: true
      headers:
        - includes:
            Content-Type: "application/json"

#  - name: "Create New Post"
#    invoke:
#      url_values:
#        locale:
#          - "us"
#          - "uk"
#        project:
#          - "coffeeshop"
#          - "0v7jg"
#        env:
#          - "-stage"
#          - ""
#        path: "/grind"
#      method: "GET"
#      payload: {}
#      headers:
#        Authorization: "Bearer $token"
#    expected_response:
#      status_code: 201
#      body_contains:
#        - "id"
#        - "title"
#        - "content"
#      error: false